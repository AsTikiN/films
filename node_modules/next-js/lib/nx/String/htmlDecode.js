/* vim: set expandtab tabstop=4 shiftwidth=4 softtabstop=4: */

/*!
 * Next JS
 *
 * Copyright (c)2012 Xenophy.CO.,LTD All rights Reserved.
 * http://www.xenophy.com
 */

// {{{ NX.String.htmlDecode

/**
 * @class NX.String
 */

/**
 * @method htmlDecode
 *
 * "write it"
 *
 * @param o {Object} xxx
 * @return {Object}
 */
module.exports = (function() {

    var entities = {
        '&amp;': '&',
        '&gt;': '>',
        '&lt;': '<',
        '&quot;': '"'
    }, keys = [], p, regex;

    for(p in entities) {
        keys.push(p);
    }

    regex = new RegExp('(' + keys.join('|') + '|&#[0-9]{1,5};' + ')', 'g');

    return function(value) {

        return (!value) ? value : String(value).replace(regex, function(match, capture) {

            if(capture in entities) {

                return entities[capture];

            } else {

                return String.fromCharCode(parseInt(capture.substr(2), 10));

            }

        });

    };

})();

// }}}

/*
 * Local variables:
 * tab-width: 4
 * c-basic-offset: 4
 * c-hanging-comment-ender-p: nil
 * End:
 */
