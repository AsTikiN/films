<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">/* vim: set expandtab tabstop=4 shiftwidth=4 softtabstop=4: */

/*!
 * Next JS
 *
 * Copyright (c)2012 Xenophy.CO.,LTD All rights Reserved.
 * http://www.xenophy.com
 */

// {{{ NX.Date.parseCodes

<span id='NX-Date'>/**
</span> * @class NX.Date
 */

<span id='NX-Date-method-parseCodes'>/**
</span> * @method parseCodes
 *
 * &quot;write it&quot;
 *
 * @param o {Object} xxx
 * @return {Object}
 */
module.exports = {

    d: {
        g: 1,
        c: &quot;d = parseInt(results[{0}], 10);\n&quot;,
        s: &quot;(\\d{2})&quot;
    },

    j: {
        g:1,
        c:&quot;d = parseInt(results[{0}], 10);\n&quot;,
        s:&quot;(\\d{1,2})&quot;
    },

    D: function() {

        for(var a = [], i = 0; i &lt; 7; a.push(NX.Date.getShortDayName(i)), ++i);

        return {
            g: 0,
            c: null,
            s: &quot;(?:&quot; + a.join(&quot;|&quot;) +&quot;)&quot;
        };
    },

    l: function() {

        return {
            g: 0,
            c: null,
            s: &quot;(?:&quot; + NX.Date.dayNames.join(&quot;|&quot;) + &quot;)&quot;
        };
    },

    N: {
        g: 0,
        c: null,
        s: &quot;[1-7]&quot;
    },

    S: {
        g: 0,
        c: null,
        s: &quot;(?:st|nd|rd|th)&quot;
    },

    w: {
        g: 0,
        c: null,
        s: &quot;[0-6]&quot;
    },

    z: {
        g: 1,
        c: &quot;z = parseInt(results[{0}], 10);\n&quot;,
        s: &quot;(\\d{1,3})&quot;
    },

    W: {
        g: 0,
        c: null,
        s: &quot;(?:\\d{2})&quot;
    },

    F: function() {

        return {
            g: 1,
            c: &quot;m = parseInt(NX.Date.getMonthNumber(results[{0}]), 10);\n&quot;,
            s: &quot;(&quot; + NX.Date.monthNames.join(&quot;|&quot;) + &quot;)&quot;
        };

    },

    M: function() {

        for(var a = [], i = 0; i &lt; 12; a.push(NX.Date.getShortMonthName(i)), ++i);

        return NX.applyIf({
            s:&quot;(&quot; + a.join(&quot;|&quot;) + &quot;)&quot;
        }, NX.Date.formatCodeToRegex(&quot;F&quot;));
    },

    m: {
        g: 1,
        c: &quot;m = parseInt(results[{0}], 10) - 1;\n&quot;,
        s: &quot;(\\d{2})&quot;
    },

    n: {
        g: 1,
        c: &quot;m = parseInt(results[{0}], 10) - 1;\n&quot;,
        s: &quot;(\\d{1,2})&quot;
    },

    t: {
        g: 0,
        c: null,
        s: &quot;(?:\\d{2})&quot;
    },

    L: {
        g: 0,
        c: null,
        s: &quot;(?:1|0)&quot;
    },

    o: function() {
        return NX.Date.formatCodeToRegex(&quot;Y&quot;);
    },

    Y: {
        g: 1,
        c: &quot;y = parseInt(results[{0}], 10);\n&quot;,
        s: &quot;(\\d{4})&quot;
    },

    y: {
        g: 1,
        c: &quot;var ty = parseInt(results[{0}], 10);\n&quot;
           + &quot;y = ty &gt; NX.Date.y2kYear ? 1900 + ty : 2000 + ty;\n&quot;,
        s: &quot;(\\d{1,2})&quot;
    },

    a: {
        g: 1,
        c: &quot;if(/(am)/i.test(results[{0}])) {\n&quot;
           + &quot;if(!h || h == 12) { h = 0; }\n&quot;
           + &quot;} else { if(!h || h &lt; 12) { h = (h || 0) + 12; }}&quot;,
        s: &quot;(am|pm|AM|PM)&quot;
    },

    A: {
        g: 1,
        c: &quot;if(/(am)/i.test(results[{0}])) {\n&quot;
            + &quot;if(!h || h == 12) { h = 0; }\n&quot;
            + &quot;} else { if(!h || h &lt; 12) { h = (h || 0) + 12; }}&quot;,
        s: &quot;(AM|PM|am|pm)&quot;
    },

    g: function() {
        return NX.Date.formatCodeToRegex(&quot;G&quot;);
    },

    G: {
        g: 1,
        c: &quot;h = parseInt(results[{0}], 10);\n&quot;,
        s: &quot;(\\d{1,2})&quot;
    },

    h: function() {
        return NX.Date.formatCodeToRegex(&quot;H&quot;);
    },

    H: {
        g: 1,
        c: &quot;h = parseInt(results[{0}], 10);\n&quot;,
        s: &quot;(\\d{2})&quot;
    },

    i: {
        g: 1,
        c: &quot;i = parseInt(results[{0}], 10);\n&quot;,
        s: &quot;(\\d{2})&quot;
    },

    s: {
        g: 1,
        c: &quot;s = parseInt(results[{0}], 10);\n&quot;,
        s: &quot;(\\d{2})&quot;
    },

    u: {
        g: 1,
        c: &quot;ms = results[{0}]; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n&quot;,
        s: &quot;(\\d+)&quot;
    },

    O: {
        g: 1,
        c: [
            &quot;o = results[{0}];&quot;,
            &quot;var sn = o.substring(0,1),&quot;,
            &quot;hr = o.substring(1,3)*1 + Math.floor(o.substring(3,5) / 60),&quot;,
            &quot;mn = o.substring(3,5) % 60;&quot;,
            &quot;o = ((-12 &lt;= (hr*60 + mn)/60) &amp;&amp; ((hr*60 + mn)/60 &lt;= 14))? (sn + NX.String.leftPad(hr, 2, '0') + NX.String.leftPad(mn, 2, '0')) : null;\n&quot; // -12hrs &lt;= GMT offset &lt;= 14hrs
            ].join(&quot;\n&quot;),
            s: &quot;([+\-]\\d{4})&quot;
        },
        P: {
            g: 1,
            c: [
                &quot;o = results[{0}];&quot;,
                &quot;var sn = o.substring(0,1),&quot;,
                &quot;hr = o.substring(1,3)*1 + Math.floor(o.substring(4,6) / 60),&quot;,
                &quot;mn = o.substring(4,6) % 60;&quot;,
                &quot;o = ((-12 &lt;= (hr*60 + mn)/60) &amp;&amp; ((hr*60 + mn)/60 &lt;= 14))? (sn + NX.String.leftPad(hr, 2, '0') + NX.String.leftPad(mn, 2, '0')) : null;\n&quot; // -12hrs &lt;= GMT offset &lt;= 14hrs
                ].join(&quot;\n&quot;),
                s: &quot;([+\-]\\d{2}:\\d{2})&quot;
            },
            T: {
                g: 0,
                c: null,
                s: &quot;[A-Z]{1,4}&quot;
            },
            Z: {
                g: 1,
                c: &quot;zz = results[{0}] * 1;\n&quot;
                   + &quot;zz = (-43200 &lt;= zz &amp;&amp; zz &lt;= 50400)? zz : null;\n&quot;,
                s: &quot;([+\-]?\\d{1,5})&quot;
            },
            c: function() {

                var calc = [],
                arr = [
                    NX.Date.formatCodeToRegex(&quot;Y&quot;, 1),
                    NX.Date.formatCodeToRegex(&quot;m&quot;, 2),
                    NX.Date.formatCodeToRegex(&quot;d&quot;, 3),
                    NX.Date.formatCodeToRegex(&quot;h&quot;, 4),
                    NX.Date.formatCodeToRegex(&quot;i&quot;, 5),
                    NX.Date.formatCodeToRegex(&quot;s&quot;, 6),
                    {c:&quot;ms = results[7] || '0'; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n&quot;},
                    {
                        c:[
                            &quot;if(results[8]) {&quot;,
                                &quot;if(results[8] == 'Z'){&quot;,
                                    &quot;zz = 0;&quot;,
                                &quot;} else if(results[8].indexOf(':') &gt; -1){&quot;,
                                    NX.Date.formatCodeToRegex(&quot;P&quot;, 8).c,
                                &quot;} else {&quot;,
                                    NX.Date.formatCodeToRegex(&quot;O&quot;, 8).c,
                                &quot;}&quot;,
                            &quot;}&quot;
                        ].join('\n')
                    }
                ];

                for(var i = 0, l = arr.length; i &lt; l; ++i) {
                    calc.push(arr[i].c);
                }

                return {
                    g: 1,
                    c: calc.join(&quot;&quot;),
                    s:[
                        arr[0].s,
                        &quot;(?:&quot;, &quot;-&quot;, arr[1].s,
                        &quot;(?:&quot;, &quot;-&quot;, arr[2].s,
                        &quot;(?:&quot;,
                        &quot;(?:T| )?&quot;,
                        arr[3].s, &quot;:&quot;, arr[4].s,
                        &quot;(?::&quot;, arr[5].s, &quot;)?&quot;,
                        &quot;(?:(?:\\.|,)(\\d+))?&quot;,
                        &quot;(Z|(?:[-+]\\d{2}(?::)?\\d{2}))?&quot;,
                        &quot;)?&quot;,
                        &quot;)?&quot;,
                        &quot;)?&quot;
                    ].join(&quot;&quot;)
                };
            },
            U: {
                g: 1,
                c: &quot;u = parseInt(results[{0}], 10);\n&quot;,
                s: &quot;(-?\\d+)&quot;
            }
};

// }}}

/*
 * Local variables:
 * tab-width: 4
 * c-basic-offset: 4
 * c-hanging-comment-ender-p: nil
 * End:
 */
</pre>
</body>
</html>
